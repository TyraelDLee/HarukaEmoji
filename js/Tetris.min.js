(function(){function a(a){const b=document.getElementsByTagName('main')[0];for(let c=0;c<a.length;c++)for(let e=0;e<a[0].length;e++)if(1===a[c][e]){let a=c,f=3+e;const g=document.createElement('img');g.src='../images/svga/13.svg',g.setAttribute('frame','13'),g.setAttribute('moving','1'),g.setAttribute('location',`${a},${f}`),g.setAttribute('style',`height: ${d()}px; width: ${d()}px; top: ${a*d()}px; left: ${f*d()}px`),b.appendChild(g),h[a][f]=1}}function b(){let a,b=document.getElementsByTagName('main')[0].querySelectorAll('img'),c=!1;return b.forEach((a)=>{if('1'===a.getAttribute('moving')){let b=a.getAttribute('location').split(',')[0]-1+1,d=a.getAttribute('location').split(',')[1]-1+1;b<e&&2===h[b+1][d]&&(c=!0)}}),b.forEach((b)=>{if('1'===b.getAttribute('moving')){let g=b.getAttribute('location').split(',')[0],i=b.getAttribute('location').split(',')[1];g-1+1<e-1&&!c?(b.setAttribute('location',`${g-1+2},${i}`),b.style.top=`${(g-1+2)*d()}px`,h[g-1+1][i-1+1]=0,h[g-1+2][i-1+1]=1,a=!1):(h[g-1+1][i-1+1]=2,b.setAttribute('moving','0'),f(0,2),a=!0)}}),a}function c(a){let b=document.getElementsByTagName('main')[0].querySelectorAll('img'),c=g+1,e=-1;b.forEach((a)=>{'1'===a.getAttribute('moving')&&(a.getAttribute('location').split(',')[1]-1+1>e&&(e=a.getAttribute('location').split(',')[1]-1+1),a.getAttribute('location').split(',')[1]-1+1<c&&(c=a.getAttribute('location').split(',')[1]-1+1))}),console.log(c+' '+e),0===c&&0===a&&(a=1),e==g-1&&2===a&&(a=1),b.forEach((b)=>{if('1'===b.getAttribute('moving')){let c=b.getAttribute('location').split(',')[0],e=b.getAttribute('location').split(',')[1];b.setAttribute('location',`${c},${e-1+a}`),b.style.left=`${(e-1+a)*d()}px`,h[c-1+1][e-1+1]=0,h[c-1+1][e-1+a]=1}})}function d(){return window.innerWidth/g<window.innerHeight/e?window.innerWidth/g:window.innerHeight/e}function f(a,b){let c=document.getElementsByTagName('main')[0].querySelectorAll('img');c.forEach((c)=>{c.getAttribute('moving')-1+1===a&&(svga(c,b),setTimeout(()=>{svga(c,0)},600))})}let e,g,h=[];(function(a,b){g=a,e=b;const c=document.getElementsByTagName('main')[0];c.style.height=20*d()+'px',c.style.width=10*d()+'px',h=Array(b).fill(0).map(()=>Array(a).fill(0)),h.push(Array(a).fill(2))})(10,20);const i=[[1,1,1,1]],j=[[[1,1,1,1]],[[1,1],[1,1]],[[1,1,1],[0,1,0]],[[0,1,1],[1,1,0]],[[0,0,0,1],[1,1,1,1]]];a(j[Math.floor(Math.random()*(j.length-1))]),setInterval(()=>{b()&&a(i)},1e3),window.addEventListener('resize',()=>{let a=document.getElementsByTagName('main')[0].querySelectorAll('.game-board-col');a.forEach((a)=>{a.style.height=d()+'px',a.style.width=d()+'px'})}),window.addEventListener('keydown',(d)=>{switch(d.code){case'ArrowUp':break;case'ArrowLeft':f(1,1),c(0);break;case'ArrowRight':f(1,1),c(2);break;case'ArrowDown':f(1,1),b()&&a(i);}})})();