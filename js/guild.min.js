!async function(){async function a(){return"space.bilibili.com"===window.location.hostname?{uid:window.location.pathname.replaceAll("/",""),type:"space"}:await fetch(`https://api.live.bilibili.com/xlive/web-room/v2/index/getRoomPlayInfo?room_id=${window.location.pathname.replaceAll("/","")}&no_playurl=0&mask=1&qn=0&platform=web&protocol=0,1&format=0,1,2&codec=0,1&dolby=5&panorama=1`,{method:"GET",credentials:"include",body:null}).then((a)=>a.json()).then((a)=>0===a.code?{uid:a.data.uid,type:"live"}:{uid:0,type:""}).catch(()=>({uid:0,type:""}))}async function b(a){const b=await fetch(chrome.runtime.getURL("../guild/guildList.json")).then((a)=>a.json()),c=await fetch(chrome.runtime.getURL("../guild/finalresult.json")).then((a)=>a.json());let d=0;for(let b of c.fulldatalist)for(let c of b.vlist)if(a-0===c.uid){d=b.gid;break}for(let c of b.guildinfolist)if(c.gid===d)return c.name}const c=/^\d*$/;if(c.test(window.location.pathname.replaceAll("/",""))){const c=await a(),d=await b(c.uid);if(0!==c.uid&&""!==d)if("space"===c.type){const a=new MutationObserver(function(b){b.forEach(function(b){if("childList"===b.type&&void 0!==b.addedNodes[0]&&"app"===b.addedNodes[0].id){const b=document.getElementById("app").getElementsByClassName("h")[0].getElementsByClassName("h-inner")[0].getElementsByClassName("h-info")[0].getElementsByClassName("h-basic")[0],c=document.createElement("div");c.classList.add("h-basic-spacing"),c.classList.add("guild-badge");let e=`<h4 title="所属公会: ${d}" class="h-sign">所属公会: ${d}</h4>`;c.innerHTML+=e,b.append(c),a.disconnect()}})});a.observe(document.body,{attributes:!0,childList:!0})}else if("live"===c.type){const a=document.getElementsByClassName("upper-row")[0].getElementsByClassName("right-ctnr")[0],b=document.createElement("div");b.classList.add("icon-ctnr"),b.setAttribute("style","line-height: 16px");let c=`<span class="v-middle live-skin-normal-a-text watched-icon">所属公会: </span><span title="${d}" class="action-text live-skin-normal-a-text v-middle watched-text">${d}</span>`;b.innerHTML+=c,a.prepend(b)}}}();