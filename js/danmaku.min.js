!async function(){function a(a,c){switch(a){case 0:let d=`{"uid":${c[0]},"roomid":${c[1]},"protover":3,"platform":"web","type":2,"key": ${c[2]}}`;return d=b(d),console.log(d),d;case 1:return{};default:return{uid:c[0],roomid:c[1],protover:3,platform:'web',type:2,key:c[2]};}}function b(a){let b=new ArrayBuffer(2*a.length),c=new Uint8Array(b);for(let b=0;b<a.length;b++)c[b]=a.charCodeAt(b);return b}let c=await function(a){return fetch(`http://api.live.bilibili.com/xlive/web-room/v1/index/getDanmuInfo?id=${a}`,{method:'GET',credentials:'include',body:null}).then((a)=>a.json()).then((a)=>0===a.code?a.data:{}).catch(()=>({}))}(21756924);console.log(c),function(b){const c=new window.WebSocket(`wss://${b.host_list[0].host}?sub`);c.binaryType='arraybuffer',c.onopen=function(){let d=a(0,[3831650,21756924,b.token]);c.send(d)},c.onmessage=function(a){console.log(a.data)},c.onerror=function(){},c.onclose=function(){}}(c)}();