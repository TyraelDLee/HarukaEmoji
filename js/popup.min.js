!function(){function a(a){a.preventDefault()}function b(a,b){a?(b.removeAttribute("disabled"),b.parentElement.getElementsByTagName("label")[0].classList.remove("btn-disabled")):(b.setAttribute("disabled","true"),b.parentElement.getElementsByTagName("label")[0].classList.add("btn-disabled"))}function c(a,b){a?b.classList.remove("btn-disabled"):b.classList.add("btn-disabled")}function d(a){function b(){d?c-=1:c+=1;for(let a=0;5>a;a++)document.getElementsByClassName("qn-i")[a].style.transform="rotateX("+2.5*(18*a+c)+"deg)";document.getElementById("qn-items").style.marginTop=c+"px",c!==a&&setTimeout(()=>{b()},10)}a*=-18;let c=parseInt(document.getElementById("qn-items").style.marginTop.replace("px","")),d=c>a;0!=c-a&&b()}function e(){chrome.runtime.sendMessage({msg:"popupfired"}),chrome.runtime.sendMessage({msg:"updateStatus"},function(a){a.res?(j.style.display="block",j.innerText="\u6709\u66F4\u65B0\u53EF\u7528",G=a.address):(j.style.display="none",j.innerText="")})}function f(){let a="";for(let b=1;b<navigator.hardwareConcurrency+1;b++)a+="<option value=\""+b+"\">"+b+"</option>";y.innerHTML=a}function g(a,b){for(let c of a)"OPTION"===c.nodeName&&(c.getAttribute("value")!==b+""&&"selected"===c.getAttribute("selected")&&c.removeAttribute("selected"),c.getAttribute("value")===b+""&&c.setAttribute("selected","selected"))}const h=chrome.runtime.getManifest().version,i=document.getElementById("version"),j=document.getElementById("update"),k=document.getElementsByClassName("setting")[0],l=document.getElementById("notification"),m=document.getElementById("medal"),n=document.getElementById("check-in"),o=document.getElementById("img-notice"),p=document.getElementById("b-coin"),q=document.getElementById("qn"),r=document.getElementById("btn7"),s=document.getElementById("dynamicPush"),t=document.getElementById("HiddenEntry"),u=document.getElementById("login"),v=document.getElementById("daka-switch"),w=document.getElementById("wav"),x=document.getElementById("record"),y=document.getElementById("decodeMT"),z=document.getElementById("prerecord"),A=document.getElementById("preset"),B=["\u539F\u753B","\u84DD\u5149","\u8D85\u6E05","\u9AD8\u6E05","\u6D41\u7545"],C=r.getElementsByClassName("qn-i");var D,E=0,F=-2,G="https://gitee.com/tyrael-lee/HarukaEmoji/releases";chrome.runtime.connect({name:"popup"}),function(){i.innerHTML="ver. <i>"+h+"</i>"}(),setInterval(function(){chrome.runtime.sendMessage({msg:"get_UUID"},function(a){F=a.res;let b="";-1===F?(b="\u672A\u767B\u5F55",u.style.color="#f44336"):-2!==F&&(b="\u5DF2\u767B\u5F55",u.style.color="#6dc781"),b+="<span class=\"tooltiptext tooltiptext-middle\">b\u7AD9\u767B\u5F55\u72B6\u6001\u3002\u63D2\u4EF6\u8981\u5728b\u7AD9\u767B\u5F55\u540E\u624D\u80FD\u542F\u7528\u5168\u90E8\u529F\u80FD\u3002</span>",u.innerHTML=b})},1e3),document.getElementById("bug-reporter").addEventListener("click",function(){chrome.tabs.create({url:"https://github.com/TyraelDLee/HarukaEmoji/issues"})}),document.getElementById("logo").addEventListener("click",function(){chrome.tabs.create({url:"https://chrome.google.com/webstore/detail/rua%E8%B1%B9%E5%99%A8/igapngheaefbfhikpbngjgakfnedkchb"})}),document.getElementById("version").addEventListener("click",function(){chrome.tabs.create({url:"https://github.com/TyraelDLee/HarukaEmoji"})}),document.getElementById("source").addEventListener("click",function(){chrome.tabs.create({url:"https://github.com/TyraelDLee/HarukaEmoji"})}),document.getElementById("readme").addEventListener("click",function(){chrome.tabs.create({url:"./readme.html"})}),document.getElementsByClassName("record-manual")[0].addEventListener("click",()=>{chrome.tabs.create({url:"./readme.html#record"})}),document.getElementsByClassName("record-manual")[1].addEventListener("click",()=>{chrome.tabs.create({url:"./readme.html#record"})}),j.addEventListener("click",()=>{chrome.tabs.create({url:G})}),l.addEventListener("change",function(){let a=this.checked;b(this.checked,o),chrome.storage.sync.set({notification:a},function(){console.log("notification on:"+a)})}),m.addEventListener("change",function(){let a=this.checked;chrome.storage.sync.set({medal:a},function(){})}),n.addEventListener("change",function(){let a=this.checked;chrome.storage.sync.set({checkIn:a},function(){})}),o.addEventListener("change",function(){let a=this.checked;chrome.storage.sync.set({imageNotice:a},function(){})}),p.addEventListener("change",function(){let a=this.checked;chrome.storage.sync.set({bcoin:a},function(){})}),q.addEventListener("change",function(){D=this.checked,c(this.checked,r),chrome.storage.sync.set({qn:D},function(){})}),r.addEventListener("wheel",function(a){D&&(0<=a.deltaY?E+=1:E-=1,0>=E&&(E=0),4<=E&&(E=4),d(E),chrome.runtime.sendMessage({msg:"QNV?"+B[E]},function(){}))}),r.addEventListener("mouseenter",function(){k.addEventListener("wheel",a)}),r.addEventListener("mouseleave",function(){k.removeEventListener("wheel",a)});for(let a=0;a<C.length;a++)C[a].addEventListener("click",function(){D&&(E=a,d(E),chrome.runtime.sendMessage({msg:"QNV?"+B[E]},function(){}))});s.addEventListener("change",function(){let a=this.checked;chrome.storage.sync.set({dynamicPush:a},function(){})}),t.addEventListener("change",function(){let a=this.checked;chrome.storage.sync.set({hiddenEntry:a},function(){})}),v.addEventListener("change",function(){let a=this.checked;chrome.storage.sync.set({daka:a},function(){})}),w.addEventListener("change",function(){let a=this.checked;chrome.storage.sync.set({wav:a},function(){})}),x.addEventListener("change",function(){let a=this.checked;a?(y.removeAttribute("disabled"),z.removeAttribute("disabled"),A.removeAttribute("disabled")):(y.setAttribute("disabled",""),z.setAttribute("disabled",""),A.setAttribute("disabled","")),chrome.storage.sync.set({record:a},function(){})}),y.addEventListener("change",function(){let a=this.value;console.log(a),chrome.storage.sync.set({decodeThread:a},function(){})}),z.addEventListener("change",function(){let a=this.value;console.log(a),chrome.storage.sync.set({prerecord:a},function(){})}),A.addEventListener("change",function(){let a=this.value;chrome.storage.sync.set({decodePreset:a},function(){})}),window.onload=function(){e(),f(),chrome.storage.sync.get(["notification"],function(a){b(a.notification,o),l.checked=a.notification}),chrome.storage.sync.get(["medal"],function(a){m.checked=a.medal}),chrome.storage.sync.get(["checkIn"],function(a){n.checked=a.checkIn}),chrome.storage.sync.get(["imageNotice"],function(a){o.checked=a.imageNotice}),chrome.storage.sync.get(["bcoin"],function(a){p.checked=a.bcoin}),chrome.storage.sync.get(["qn"],function(a){q.checked=a.qn,D=a.qn,c(a.qn,r)}),chrome.storage.sync.get(["qnvalue"],function(a){E=B.indexOf(a.qnvalue),d(E)}),chrome.storage.sync.get(["dynamicPush"],function(a){s.checked=a.dynamicPush}),chrome.storage.sync.get(["hiddenEntry"],function(a){t.checked=a.hiddenEntry}),chrome.storage.sync.get(["daka"],function(a){v.checked=a.daka}),chrome.storage.sync.get(["wav"],function(a){w.checked=a.wav}),chrome.storage.sync.get(["record"],function(a){x.checked=a.record,a.record||(y.setAttribute("disabled",""),z.setAttribute("disabled",""),A.setAttribute("disabled",""))}),chrome.storage.sync.get(["decodeThread"],function(a){g(y.childNodes,a.decodeThread)}),chrome.storage.sync.get(["prerecord"],function(a){g(z.childNodes,a.prerecord)}),chrome.storage.sync.get(["decodePreset"],function(a){g(A.childNodes,a.decodePreset)})}}();