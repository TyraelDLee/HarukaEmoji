!function(){function a(){document.documentElement.setAttribute("theme","dark"),(window.location.href.includes("t.bilibili.com/pages/nav/index_new")||window.location.href.includes("www.bilibili.com/page-proxy/game-nav.html")||window.location.href.includes("manga.bilibili.com/eden/bilibili-nav-panel.html"))&&(document.documentElement.style.backgroundColor="transparent",document.body.style.backgroundColor="transparent"),window.location.href.includes("message.bilibili.com")&&(document.body.style.background=`url(${chrome.runtime.getURL("../images/misc/infocenterbg.dark.webp")}) top/cover no-repeat fixed`),window.location.href.includes("t.bilibili.com/vote/h5/index/")&&document.body.classList.replace("light","dark")}function b(){document.documentElement.removeAttribute("theme"),window.location.href.includes("message.bilibili.com")&&(document.body.style.background=`url(${chrome.runtime.getURL("../images/misc/infocenterbg.light.webp")}) top/cover no-repeat fixed`),window.location.href.includes("t.bilibili.com/vote/h5/index/")&&document.body.classList.replace("dark","light")}let c=!1;chrome.storage.sync.get(["darkMode","darkModeSystem"],(b)=>{b.darkMode&&a(),b.darkModeSystem&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&a(),c=b.darkModeSystem}),window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&c&&a(),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(d)=>{c&&(d.matches?a():b())}),chrome.storage.onChanged.addListener(function(d){for(let[e,{oldValue:f,newValue:g}]of Object.entries(d))"darkMode"===e?(console.log(g),g?a():b()):"darkModeSystem"===e?(c=g,g?window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&a():b()):void 0})}();