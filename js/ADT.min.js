function ImageButton(a,b){this.URL=a,this.span=b}ImageButton.prototype.getURL=function(){return this.URL},ImageButton.prototype.getSpan=function(){return 1>this.span?1:4<this.span?4:this.span};function Medal(a,b,c,d,e,f,g,h){this.MID=a,this.RID=b,this.UID=c,this.mName=d,this.mLevel=e,this.mColourStart=f,this.mColourEnd=g,this.mColourBorder=h}Medal.prototype.toString=function(){return this.MID+" "+this.UID+" "+this.mName};function MedalList(){this.list=[]}MedalList.prototype.push=function(a){for(let b=0;b<this.list.length;b++)if(this.list[b].MID===a.MID)return!1;return this.list.push(a),!0},MedalList.prototype.existsRID=function(a){for(let b=0;b<this.list.length;b++)if(this.list[b].RID===a)return!0;return!1},MedalList.prototype.existsUID=function(a){for(let b=0;b<this.list.length;b++)if(this.list[b].UID===a)return!0;return!1},MedalList.prototype.get=function(a){for(let b=0;b<this.list.length;b++)if(this.list[b].RID===a)return this.list[b];return new Medal("-1","-1","-1","null","-1","0","0","0")},MedalList.prototype.getByUid=function(a){for(let b=0;b<this.list.length;b++)if(this.list[b].UID===a)return this.list[b];return new Medal("-1","-1","-1","null","-1","0","0","0")},MedalList.prototype.getUID=function(a){for(let b=0;b<this.list.length;b++)if(this.list[b].RID===a)return this.list[b].UID;return"-1"},MedalList.prototype.getName=function(a){for(let b=0;b<this.list.length;b++)if(this.list[b].RID===a)return this.list[b].mName;return"-1"},MedalList.prototype.length=function(){return this.list.length},MedalList.prototype.clearAll=function(){this.list=[]};function ReplyPayload(){this.uid="",this.type="",this.name="",this.url="",this.face="",this.time=""}ReplyPayload.prototype.isSame=function(a){return this.uid===a.uid},ReplyPayload.prototype.isOlderThan=function(a){return parseInt(this.time)>parseInt(a)};class DanmakuArr{constructor(){this.list=[],this.size=0,this.displaySize=this.size}push(a){this.list.push(a),this.size++}concat(a){this.list=this.list.concat(a.list),this.size+=a.size}get(a){return this.list[a]}max(){let a=0;for(let b=0;b<this.list.length;b++)a<this.list[b].time&&(a=this.list[b].time);return a}min(){let a=Number.MAX_VALUE;for(let b=0;b<this.list.length;b++)a>this.list[b].time&&(a=this.list[b].time);return a}sort(a){function b(a,b,c){const d=a[b];a[b]=a[c],a[c]=d}const c=this.max(),d=this.min(),e=[],f=Math.floor((c-d)/a)+1;for(let c=0;c<this.size;c++){const a=~~(this.list[c].ts/f);e[a]||(e[a]=[]),e[a].push(this.list[c]);for(let c=e[a].length;0<c;)void 0!==e[a][c]&&e[a][c].ts<e[a][c-1].ts&&b(e[a],c,c-1),c--}let g=[];for(let b=0;b<e.length;b++)e[b]&&(g=g.concat(e[b]));this.list=g}find(a){function b(a){return a.replaceAll(",","\uFF0C").replaceAll(".","\u3002").replaceAll("?","\uFF1F").replaceAll("!","\uFF01").replaceAll(";","\uFF1B").replaceAll(":","\uFF1A").replaceAll("\u201C","\"").replaceAll("\u201D","\"").replaceAll("(","\uFF08").replaceAll(")","\uFF09")}let c=new DanmakuArr;if(a=b(a),""===a)return this;for(let d=0;d<this.size;d++)b(this.list[d].content).includes(a)&&c.push(this.list[d]);return c}}