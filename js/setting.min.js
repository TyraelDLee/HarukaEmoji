!function(){function a(c,d,e,f=!1){return fetch(`https://api.bilibili.com/x/relation/${f?`whispers?`:`followings?vmid=${d}&`}pn=${c}&ps=${i}`,{method:'GET',credentials:'include',body:null}).then((a)=>a.json()).then((g)=>{if(0===g.code){for(let a=0;a<g.data.list.length;a++)b(g.data.list[a].face,g.data.list[a].uname,g.data.list[a].mid,g.data.list[a].official_verify.type,g.data.list[a].official_verify.desc,j.get(g.data.list[a].mid));return c===e&&(f?document.getElementById('loading').style.display='none':a(1,d,3,!0).then((a)=>{a<=i&&(document.getElementById('loading').style.display='none')})),q=!0,'undefined'==typeof g.data.total?g.data.list.length+1:g.data.total}return 0})}function b(a,b,d,e,f,h=[0,0,0,0,0]){d-=0;let i=0===e?'background-position: var(--personal-verify);':1===e?'background-position: var(--organization-verify);':'display: none;',j=document.createElement('div');j.classList.add('rua-setting-user-block'),j.innerHTML=`<div class="rua-setting-user-info">
            <a href="https://space.bilibili.com/${d}" target="_blank" class="user-face"><img src="${a}"><span class="verified" style="${i}"></span></a>
            <div class="user-name"><div style="display: flex"><a href="https://space.bilibili.com/${d}" target="_blank">${b}</a><span class="medal" ${-1===h.indexOf(0)?'':`style="display:none;"`}><div class="medal-border" style="border-color: rgb(${c(h[1])})"><div class="medal-label" style="background-image: linear-gradient(45deg, rgb(${c(h[2])}), rgb(${c(h[3])}));"><span class="medal-name">${h[4]}</span></div><div class="medal-level" style="color: rgb(${c(h[1])})">${h[0]}</div></div></span></div><span class="verify-text">${f}</span></div>
        </div>
        <div class="rua-setting-button-group">
            <div class="button-host">
                <section class="button">
                    <div class="checkbox">
                        <input id="rua-input-hb-${d}" type="checkbox" ${-1===o.indexOf(d)&&-1===h.indexOf(0)?'checked':''} ${-1===h.indexOf(0)?'':'disabled'}>
                        <label ${-1===h.indexOf(0)?'':`class="btn-disabled"`}></label>
                    </div>
                </section>
            </div>
            <div class="button-host">
                <section class="button">
                    <div class="checkbox">
                        <input id="rua-input-dk-${d}" type="checkbox" ${-1===n.indexOf(d)&&-1===h.indexOf(0)?'checked':''} ${-1===h.indexOf(0)?'':'disabled'}>
                        <label ${-1===h.indexOf(0)?'':`class="btn-disabled"`}></label>
                    </div>
                </section>
            </div>
            <div class="button-host">
                <section class="button">
                    <div class="checkbox">
                        <input id="rua-input-live-${d}" type="checkbox" ${-1===k.indexOf(d)?'checked':''}>
                        <label></label>
                    </div>
                </section>
            </div>
            <div class="button-host">
                <section class="button">
                    <div class="checkbox">
                        <input id="rua-input-video-${d}" type="checkbox" ${-1===l.indexOf(d)?'checked':''}>
                        <label></label>
                    </div>
                </section>
            </div>
            <div class="button-host">
                <section class="button">
                    <div class="checkbox">
                        <input id="rua-input-dynamic-${d}" type="checkbox" ${-1===m.indexOf(d)?'checked':''}>
                        <label></label>
                    </div>
                </section>
            </div>
        </div>`,g.appendChild(j),document.getElementById(`rua-input-hb-${d}`).addEventListener('change',function(a){let b=a.target.checked,c=[];chrome.storage.sync.get(['blackListHB'],(a)=>{c=a.blackListHB,b?c.splice(c.indexOf(d),1):c.push(d),chrome.storage.sync.set({blackListHB:c},()=>{})})}),document.getElementById(`rua-input-dk-${d}`).addEventListener('change',function(a){let b=a.target.checked,c=[];chrome.storage.sync.get(['blackListDK'],(a)=>{c=a.blackListDK,b?c.splice(c.indexOf(d),1):c.push(d),chrome.storage.sync.set({blackListDK:c},()=>{})})}),document.getElementById(`rua-input-live-${d}`).addEventListener('change',function(a){let b=a.target.checked,c=[];chrome.storage.sync.get(['blackListLive'],(a)=>{c=a.blackListLive,b?c.splice(c.indexOf(d),1):c.push(d),chrome.storage.sync.set({blackListLive:c},()=>{})})}),document.getElementById(`rua-input-video-${d}`).addEventListener('change',function(){let a=this.checked,b=[];chrome.storage.sync.get(['blackListVideo'],(c)=>{b=c.blackListVideo,a?b.splice(b.indexOf(d),1):b.push(d),chrome.storage.sync.set({blackListVideo:b},()=>{})})}),document.getElementById(`rua-input-dynamic-${d}`).addEventListener('change',function(){let a=this.checked,b=[];chrome.storage.sync.get(['blackListDynamic'],(c)=>{b=c.blackListDynamic,a?b.splice(b.indexOf(d),1):b.push(d),chrome.storage.sync.set({blackListDynamic:b},()=>{})})})}function c(a){return parseInt(a.toString(16).substring(0,2),16)+' '+parseInt(a.toString(16).substring(2,4),16)+' '+parseInt(a.toString(16).substring(4,6),16)}function d(){return new Promise((a)=>{chrome.runtime.sendMessage({msg:'get_UUID'},function(b){a(b.res)})})}function e(a){return fetch(`https://api.bilibili.com/x/relation/stat?vmid=${a}&jsonp=jsonp`,{method:'GET',credentials:'include',body:null}).then((a)=>a.json()).then((a)=>0===a.code?{code:0,following:a.data.following,whisper:a.data.whisper}:{code:-1})}function f(a){return fetch(`https://api.live.bilibili.com/xlive/web-ucenter/user/MedalWall?target_id=${a}`,{method:'GET',credentials:'include',body:null}).then((a)=>a.json()).then((a)=>{if(0===a.code){let b=new Map;for(let c=0;c<a.data.list.length;c++)b.set(a.data.list[c].medal_info.target_id,[a.data.list[c].medal_info.level,a.data.list[c].medal_info.medal_color_border,a.data.list[c].medal_info.medal_color_start,a.data.list[c].medal_info.medal_color_end,a.data.list[c].medal_info.medal_name]);return b}return new Map}).catch(()=>new Map)}const g=document.getElementById('main');let h,j,i=50,k=[],l=[],m=[],n=[],o=[],p=!1,q=!0;!async function(){var b=Math.floor,c=Math.ceil;h=await d();let g=await e(h);j=await f(h);const r=document.getElementById('rua-icon');let s=1,t=c((g.following-0)/i),u=c((g.whisper-0)/i);r.addEventListener('click',()=>{document.documentElement.scrollTop=0}),r.addEventListener('mouseenter',()=>{svga(r.getElementsByTagName('img')[0],b(2*Math.random()+1))}),r.addEventListener('mouseout',()=>{svga(r.getElementsByTagName('img')[0],0)}),r.addEventListener('touchstart',()=>{svga(r.getElementsByTagName('img')[0],b(2*Math.random()+1))}),r.addEventListener('touchend',()=>{svga(r.getElementsByTagName('img')[0],0)}),chrome.storage.sync.get(['blackListLive','blackListDynamic','blackListVideo','blackListDK','blackListHB','uuid'],(b)=>{k=b.blackListLive,m=b.blackListDynamic,l=b.blackListVideo,n=b.blackListDK,o=b.blackListHB,a(1,h,t,p)}),document.body.onscroll=()=>{20<document.documentElement.scrollTop?(document.getElementById('rua-head').setAttribute('style',`top: 90px; position: fixed; padding: 20px 75px;border-bottom:none;`),document.getElementById('rua-head').classList.add('rua-head-border'),document.getElementById('rua-head-space').setAttribute('style',`display:block; padding: 0; border: none;`)):(document.getElementById('rua-head').removeAttribute('style'),document.getElementById('rua-head').classList.remove('rua-head-border'),document.getElementById('rua-head-space').setAttribute('style',`display:none; padding: 0; border: none;`)),-70>=c(document.body.clientHeight-document.documentElement.scrollTop-window.innerHeight)&&q&&(q=!1,s++,s<=t&&a(s,h,t,p),s===t+1&&!p&&(s=1,t=u,p=!0))}}()}();