!function(){function a(c,d,e,f=!1,g=!1,h=""){return console.log(g),fetch(g?`https://api.bilibili.com/x/relation/followings/search?vmid=${d}&pn=${c}&ps=${k}&order=desc&order_type=attention&name=${h}`:`https://api.bilibili.com/x/relation/${f?`whispers?`:`followings?vmid=${d}&`}pn=${c}&ps=${k}`,{method:"GET",credentials:"include",body:null}).then(a=>a.json()).then(g=>{if(0===g.code){for(let a=0;a<g.data.list.length;a++)b(g.data.list[a].face,g.data.list[a].uname,g.data.list[a].mid,g.data.list[a].official_verify.type,g.data.list[a].official_verify.desc,j.get(g.data.list[a].mid));return c===e&&(f?document.getElementById("loading").style.display="none":a(1,d,3,!0).then(a=>{a<=k&&(document.getElementById("loading").style.display="none")})),r=!0,"undefined"==typeof g.data.total?g.data.list.length+1:g.data.total}return 0})}function b(a,b,d,e,f,h=[0,0,0,0,0]){d-=0;let i=0===e?"background-position: var(--personal-verify);":1===e?"background-position: var(--organization-verify);":"display: none;",j=document.createElement("div");j.classList.add("rua-setting-user-block"),j.innerHTML=`<div class="rua-setting-user-info">
            <a href="https://space.bilibili.com/${d}" target="_blank" class="user-face"><img src="${a}"><span class="verified" style="${i}"></span></a>
            <div class="user-name"><div style="display: flex"><a href="https://space.bilibili.com/${d}" target="_blank">${b}</a><span class="medal" ${-1===h.indexOf(0)?"":`style="display:none;"`}><div class="medal-border" style="border-color: rgb(${c(h[1])})"><div class="medal-label" style="background-image: linear-gradient(45deg, rgb(${c(h[2])}), rgb(${c(h[3])}));"><span class="medal-name">${h[4]}</span></div><div class="medal-level" style="color: rgb(${c(h[1])})">${h[0]}</div></div></span></div><span class="verify-text">${f}</span></div>
        </div>
        <div class="rua-setting-button-group">
            <div class="button-host">
                <section class="button">
                    <div class="checkbox">
                        <input id="rua-input-hb-${d}" type="checkbox" ${-1===p.indexOf(d)&&-1===h.indexOf(0)?"checked":""} ${-1===h.indexOf(0)?"":"disabled"}>
                        <label ${-1===h.indexOf(0)?"":`class="btn-disabled"`}></label>
                    </div>
                </section>
            </div>
            <div class="button-host">
                <section class="button">
                    <div class="checkbox">
                        <input id="rua-input-dk-${d}" type="checkbox" ${-1===o.indexOf(d)&&-1===h.indexOf(0)?"checked":""} ${-1===h.indexOf(0)?"":"disabled"}>
                        <label ${-1===h.indexOf(0)?"":`class="btn-disabled"`}></label>
                    </div>
                </section>
            </div>
            <div class="button-host">
                <section class="button">
                    <div class="checkbox">
                        <input id="rua-input-live-${d}" type="checkbox" ${-1===l.indexOf(d)?"checked":""}>
                        <label></label>
                    </div>
                </section>
            </div>
            <div class="button-host">
                <section class="button">
                    <div class="checkbox">
                        <input id="rua-input-video-${d}" type="checkbox" ${-1===m.indexOf(d)?"checked":""}>
                        <label></label>
                    </div>
                </section>
            </div>
            <div class="button-host">
                <section class="button">
                    <div class="checkbox">
                        <input id="rua-input-dynamic-${d}" type="checkbox" ${-1===n.indexOf(d)?"checked":""}>
                        <label></label>
                    </div>
                </section>
            </div>
        </div>`,g.appendChild(j),document.getElementById(`rua-input-hb-${d}`).addEventListener("change",function(a){let b=a.target.checked,c=[];chrome.storage.sync.get(["blackListHB"],a=>{c=a.blackListHB,b?c.splice(c.indexOf(d),1):c.push(d),chrome.storage.sync.set({blackListHB:c},()=>{})})}),document.getElementById(`rua-input-dk-${d}`).addEventListener("change",function(a){let b=a.target.checked,c=[];chrome.storage.sync.get(["blackListDK"],a=>{c=a.blackListDK,b?c.splice(c.indexOf(d),1):c.push(d),chrome.storage.sync.set({blackListDK:c},()=>{})})}),document.getElementById(`rua-input-live-${d}`).addEventListener("change",function(a){let b=a.target.checked,c=[];chrome.storage.sync.get(["blackListLive"],a=>{c=a.blackListLive,b?c.splice(c.indexOf(d),1):c.push(d),chrome.storage.sync.set({blackListLive:c},()=>{})})}),document.getElementById(`rua-input-video-${d}`).addEventListener("change",function(){let a=this.checked,b=[];chrome.storage.sync.get(["blackListVideo"],c=>{b=c.blackListVideo,a?b.splice(b.indexOf(d),1):b.push(d),chrome.storage.sync.set({blackListVideo:b},()=>{})})}),document.getElementById(`rua-input-dynamic-${d}`).addEventListener("change",function(){let a=this.checked,b=[];chrome.storage.sync.get(["blackListDynamic"],c=>{b=c.blackListDynamic,a?b.splice(b.indexOf(d),1):b.push(d),chrome.storage.sync.set({blackListDynamic:b},()=>{})})})}function c(a){return parseInt(a.toString(16).substring(0,2),16)+" "+parseInt(a.toString(16).substring(2,4),16)+" "+parseInt(a.toString(16).substring(4,6),16)}function d(){return new Promise((a,b)=>{chrome.runtime.sendMessage({msg:"get_UUID"},function(b){a(b.res)})})}function e(a){return fetch(`https://api.bilibili.com/x/relation/stat?vmid=${a}&jsonp=jsonp`,{method:"GET",credentials:"include",body:null}).then(a=>a.json()).then(a=>0===a.code?{code:0,following:a.data.following,whisper:a.data.whisper}:{code:-1})}function f(a){return fetch(`https://api.live.bilibili.com/xlive/web-ucenter/user/MedalWall?target_id=${a}`,{method:"GET",credentials:"include",body:null}).then(a=>a.json()).then(a=>{if(0===a.code){let b=new Map;for(let c=0;c<a.data.list.length;c++)b.set(a.data.list[c].medal_info.target_id,[a.data.list[c].medal_info.level,a.data.list[c].medal_info.medal_color_border,a.data.list[c].medal_info.medal_color_start,a.data.list[c].medal_info.medal_color_end,a.data.list[c].medal_info.medal_name]);return b}return new Map}).catch(a=>new Map)}const g=document.getElementById("up-setting");let h,j,k=50,l=[],m=[],n=[],o=[],p=[],q=!1,r=!0;!function(){function a(){y.checked||x.checked||w.checked||(v.checked=!1,c(!1,w),c(!1,x),c(!1,y),chrome.storage.sync.set({dynamicPush:!1},function(){}))}function b(){chrome.runtime.sendMessage({msg:"requestOSInfo"},function(a){"win"!==a.os&&c(!1,e)}),chrome.storage.sync.get(["notification","medal","checkIn","bcoin","dynamicPush","unreadSwitch","hiddenEntry","daka","qn","qnvalue","enhancedHiddenEntry","record","prerecord","dynamicSwitch","darkMode","darkModeSystem","commentEmoji","videoPush","pgcPush","articlePush","heartBeatSwitch","squareCover","dkWord","hiddenOnVideoBtn","notificationMaster"],a=>{d.checked=a.notification,f.checked=a.hiddenEntry,g.checked=a.enhancedHiddenEntry,a.enhancedHiddenEntry?(f.setAttribute("disable",""),f.checked=a.enhancedHiddenEntry,f.parentElement.getElementsByTagName("label")[0].classList.add("btn-disabled")):(f.removeAttribute("disable"),f.parentElement.getElementsByTagName("label")[0].classList.remove("btn-disabled")),h.checked=a.qn,i.value=a.qnvalue,j.checked=a.checkIn,k.checked=a.daka,""!==a.dkWord&&(l.value=a.dkWord),m.checked=a.medal,n.checked=a.heartBeatSwitch,o.checked=a.bcoin,p.checked=a.commentEmoji,q.checked=a.squareCover,r.checked=a.darkMode,s.checked=a.darkModeSystem,A.checked=a.notificationMaster,t.checked=a.unreadSwitch,u.checked=a.dynamicSwitch,v.checked=a.dynamicPush,w.checked=a.videoPush,x.checked=a.pgcPush,y.checked=a.articlePush,c(a.dynamicPush,w),c(a.dynamicPush,x),c(a.dynamicPush,y),z.checked=a.hiddenOnVideoBtn}),chrome.storage.local.get(["imageNotice"],a=>{e.checked=a.imageNotice})}function c(a,b){a?(b.removeAttribute("disabled"),b.parentElement.getElementsByTagName("label")[0].classList.remove("btn-disabled")):(b.setAttribute("disabled","true"),b.parentElement.getElementsByTagName("label")[0].classList.add("btn-disabled"))}const d=document.getElementById("setting-item-switch-notification"),e=document.getElementById("setting-item-switch-img-notice"),f=document.getElementById("setting-item-switch-hidden-entry"),g=document.getElementById("setting-item-switch-enhanced-hidden-entry"),h=document.getElementById("setting-item-switch-default-quality"),i=document.getElementById("setting-item-selection-quality"),j=document.getElementById("setting-item-switch-check-in"),k=document.getElementById("setting-item-switch-dk"),l=document.getElementById("setting-item-input-dk-word"),m=document.getElementById("setting-item-switch-madel"),n=document.getElementById("setting-item-switch-heartbeat"),o=document.getElementById("setting-item-switch-b-coin"),p=document.getElementById("setting-item-switch-up-emoji"),q=document.getElementById("setting-item-switch-cover-clip"),r=document.getElementById("setting-item-switch-dark-mode"),s=document.getElementById("setting-item-switch-dark-mode-follow-system"),t=document.getElementById("setting-item-switch-message-notification"),u=document.getElementById("setting-item-switch-dynamic-notification"),v=document.getElementById("setting-item-switch-update-notification"),w=document.getElementById("setting-item-switch-video-notification"),x=document.getElementById("setting-item-switch-pcg-notification"),y=document.getElementById("setting-item-switch-article-notification"),z=document.getElementById("setting-item-switch-hidden-video-btn"),A=document.getElementById("setting-item-switch-notification-master");z.addEventListener("change",()=>{chrome.storage.sync.set({hiddenOnVideoBtn:z.checked},()=>{})}),d.addEventListener("change",()=>{chrome.storage.sync.set({notification:d.checked},()=>{})}),e.addEventListener("change",()=>{chrome.storage.local.set({imageNotice:e.checked},()=>{})}),f.addEventListener("change",()=>{chrome.storage.sync.set({hiddenEntry:f.checked},()=>{})}),g.addEventListener("change",()=>{const a=g.checked;c(a,f),f.checked=a,chrome.storage.sync.set({enhancedHiddenEntry:a,hiddenEntry:a},function(){})}),h.addEventListener("change",()=>{chrome.storage.sync.set({qn:h.checked},()=>{})}),i.addEventListener("change",()=>{chrome.storage.sync.set({qnvalue:i.value},()=>{})}),j.addEventListener("change",()=>{chrome.storage.sync.set({checkIn:j.checked},function(){})}),k.addEventListener("change",()=>{chrome.storage.sync.set({daka:k.checked},function(){})}),l.addEventListener("input",()=>{chrome.storage.sync.set({dkWord:l.value},function(){})}),m.addEventListener("change",()=>{chrome.storage.sync.set({medal:m.checked},function(){})}),n.addEventListener("change",()=>{chrome.storage.sync.set({heartBeatSwitch:n.checked},function(){})}),o.addEventListener("change",()=>{chrome.storage.sync.set({bcoin:o.checked},function(){})}),p.addEventListener("change",()=>{chrome.storage.sync.set({commentEmoji:p.checked},function(){})}),q.addEventListener("change",()=>{chrome.storage.sync.set({squareCover:q.checked},function(){})}),r.addEventListener("change",()=>{const a=r.checked;a&&(s.checked=!1,chrome.storage.sync.set({darkModeSystem:!1},function(){})),chrome.storage.sync.set({darkMode:a},function(){})}),s.addEventListener("change",()=>{const a=s.checked;this.checked&&(r.checked=!1,chrome.storage.sync.set({darkMode:!1},function(){})),chrome.storage.sync.set({darkModeSystem:a},function(){})}),t.addEventListener("change",()=>{chrome.storage.sync.set({unreadSwitch:t.checked},function(){})}),u.addEventListener("change",()=>{chrome.storage.sync.set({dynamicSwitch:u.checked},function(){})}),v.addEventListener("change",()=>{const a=v.checked;c(a,w),c(a,x),c(a,y),!a||y.checked||x.checked||w.checked||(w.checked=!0,x.checked=!0,y.checked=!0,chrome.storage.sync.set({videoPush:!0},function(){}),chrome.storage.sync.set({pgcPush:!0},function(){}),chrome.storage.sync.set({articlePush:!0},function(){})),chrome.storage.sync.set({dynamicPush:a},function(){})}),A.addEventListener("change",()=>{chrome.storage.sync.set({notificationMaster:A.checked},function(){})}),w.addEventListener("change",()=>{a(),chrome.storage.sync.set({videoPush:w.checked},function(){})}),x.addEventListener("change",()=>{a(),chrome.storage.sync.set({videoPush:x.checked},function(){})}),y.addEventListener("change",()=>{a(),chrome.storage.sync.set({videoPush:y.checked},function(){})}),b()}(),!async function(){var b=Math.floor,c=Math.ceil;h=await d();let i=await e(h);j=await f(h);const s=document.getElementById("rua-icon");let t=1,u=c((i.following-0)/k),v=c((i.whisper-0)/k);const w=document.getElementById("setting-search-user");let x=null,y=!1,z="",A=1,B=y?A:u;const C=g.firstElementChild,D=C.nextElementSibling;w.addEventListener("input",()=>{clearTimeout(x),x=setTimeout(async()=>{y=""!==w.value,z=w.value,g.innerHTML="",g.appendChild(C),g.appendChild(D),t=1,""===w.value?(await a(1,h,u,!1),B=u):(A=await a(1,h,1,q,y,z),A=c(A/k),B=A)},300)}),s.addEventListener("click",()=>{document.documentElement.scrollTop=0}),s.addEventListener("mouseenter",()=>{svga(s.getElementsByTagName("img")[0],b(2*Math.random()+1))}),s.addEventListener("mouseout",()=>{svga(s.getElementsByTagName("img")[0],0)}),s.addEventListener("touchstart",()=>{svga(s.getElementsByTagName("img")[0],b(2*Math.random()+1))}),s.addEventListener("touchend",()=>{svga(s.getElementsByTagName("img")[0],0)}),chrome.storage.sync.get(["blackListLive","blackListDynamic","blackListVideo","blackListDK","blackListHB","uuid"],b=>{l=b.blackListLive,n=b.blackListDynamic,m=b.blackListVideo,o=b.blackListDK,p=b.blackListHB,a(1,h,u,q)});let E=document.documentElement.scrollTop;document.body.onscroll=b=>{2110<document.documentElement.scrollTop?(document.getElementById("rua-head").setAttribute("style",`top: 90px; position: fixed; padding: 20px 75px;border-bottom:none;`),document.getElementById("rua-head").classList.add("rua-head-border"),document.getElementById("rua-head-space").setAttribute("style",`display:block; padding: 0; border: none;`)):(document.getElementById("rua-head").removeAttribute("style"),document.getElementById("rua-head").classList.remove("rua-head-border"),document.getElementById("rua-head-space").setAttribute("style",`display:none; padding: 0; border: none;`)),-70>=c(document.body.clientHeight-document.documentElement.scrollTop-window.innerHeight)&&(E=document.documentElement.scrollTop-E,r&&0<E&&(r=!1,t++,t<=B&&a(t,h,B,q,y,z),t===u+1&&!q&&!y&&(t=1,B=v,q=!0)),E=document.documentElement.scrollTop)}}()}();