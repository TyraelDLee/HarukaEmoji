!function(){function a(c,d,e,f=!1){return fetch(`https://api.bilibili.com/x/relation/${f?`whispers?`:`followings?vmid=${d}&`}pn=${c}&ps=${g}`,{method:'GET',credentials:'include',body:null}).then((a)=>a.json()).then((h)=>{if(0===h.code){for(let a=0;a<h.data.list.length;a++)b(h.data.list[a].face,h.data.list[a].uname,h.data.list[a].mid,h.data.list[a].official_verify.type,h.data.list[a].official_verify.desc);return c===e&&(f?document.getElementById('loading').style.display='none':a(1,d,3,!0).then((a)=>{a<=g&&(document.getElementById('loading').style.display='none')})),'undefined'==typeof h.data.total?h.data.list.length+1:h.data.total}return 0})}function b(a,b,c,d,f){c-=0;let g=0===d?'background-position: var(--personal-verify);':1===d?'background-position: var(--organization-verify);':'display: none;',k=document.createElement('div');k.classList.add('rua-setting-user-block'),k.innerHTML=`<div class="rua-setting-user-info">
            <a href="https://space.bilibili.com/${c}" target="_blank" class="user-face"><img src="${a}"><span class="verified" style="${g}"></span></a>
            <div class="user-name"><a href="https://space.bilibili.com/${c}" target="_blank">${b}</a><span class="verify-text">${f}</span></div>
        </div>
        <div class="rua-setting-button-group">
            <div class="button-host">
                <section class="button">
                    <div class="checkbox">
                        <input id="rua-input-live-${c}" type="checkbox" ${-1===h.indexOf(c)?'checked':''}>
                        <label></label>
                    </div>
                </section>
            </div>
            <div class="button-host">
                <section class="button">
                    <div class="checkbox">
                        <input id="rua-input-video-${c}" type="checkbox" ${-1===i.indexOf(c)?'checked':''}>
                        <label></label>
                    </div>
                </section>
            </div>
            <div class="button-host">
                <section class="button">
                    <div class="checkbox">
                        <input id="rua-input-dynamic-${c}" type="checkbox" ${-1===j.indexOf(c)?'checked':''}>
                        <label></label>
                    </div>
                </section>
            </div>
        </div>`,e.appendChild(k),document.getElementById(`rua-input-live-${c}`).addEventListener('change',function(a){let b=a.target.checked,d=[];console.log(b),chrome.storage.sync.get(['blackListLive'],(a)=>{d=a.blackListLive,b?d.splice(d.indexOf(c),1):d.push(c),chrome.storage.sync.set({blackListLive:d},()=>{})})}),document.getElementById(`rua-input-video-${c}`).addEventListener('change',function(){let a=this.checked,b=[];console.log(a),chrome.storage.sync.get(['blackListVideo'],(d)=>{b=d.blackListVideo,a?b.splice(b.indexOf(c),1):b.push(c),chrome.storage.sync.set({blackListVideo:b},()=>{})})}),document.getElementById(`rua-input-dynamic-${c}`).addEventListener('change',function(){let a=this.checked,b=[];chrome.storage.sync.get(['blackListDynamic'],(d)=>{b=d.blackListDynamic,a?b.splice(b.indexOf(c),1):b.push(c),chrome.storage.sync.set({blackListDynamic:b},()=>{})})})}function c(){return new Promise((a)=>{chrome.runtime.sendMessage({msg:'get_UUID'},function(b){a(b.res)})})}function d(a){return fetch(`https://api.bilibili.com/x/relation/stat?vmid=${a}&jsonp=jsonp`,{method:'GET',credentials:'include',body:null}).then((a)=>a.json()).then((a)=>0===a.code?{code:0,following:a.data.following,whisper:a.data.whisper}:{code:-1})}const e=document.getElementById('main');let f,g=50,h=[],i=[],j=[],k=!1;!async function(){var b=Math.floor,e=Math.ceil;f=await c();let l=await d(f);const m=document.getElementById('rua-icon');let n=1,o=e((l.following-0)/g),p=e((l.whisper-0)/g);m.addEventListener('click',()=>{document.documentElement.scrollTop=0}),m.addEventListener('mouseenter',()=>{svga(m.getElementsByTagName('img')[0],b(2*Math.random()+1))}),m.addEventListener('mouseout',()=>{svga(m.getElementsByTagName('img')[0],0)}),m.addEventListener('touchstart',()=>{svga(m.getElementsByTagName('img')[0],b(2*Math.random()+1))}),m.addEventListener('touchend',()=>{svga(m.getElementsByTagName('img')[0],0)}),chrome.storage.sync.get(['blackListLive','blackListDynamic','blackListVideo','uuid'],(b)=>{h=b.blackListLive,j=b.blackListDynamic,i=b.blackListVideo,a(1,f,o,k)}),document.body.onscroll=()=>{20<document.documentElement.scrollTop?(document.getElementById('rua-head').setAttribute('style',`top: 90px; position: fixed; padding: 20px 75px;border-bottom:none;`),document.getElementById('rua-head').classList.add('rua-head-border'),document.getElementById('rua-head-space').setAttribute('style',`display:block; padding: 0; border: none;`)):(document.getElementById('rua-head').removeAttribute('style'),document.getElementById('rua-head').classList.remove('rua-head-border'),document.getElementById('rua-head-space').setAttribute('style',`display:none; padding: 0; border: none;`)),-83===e(document.body.clientHeight-document.documentElement.scrollTop-window.innerHeight)&&(n++,n<=o&&a(n,f,o,k),n===o+1&&!k&&(n=1,o=p,k=!0))}}()}();