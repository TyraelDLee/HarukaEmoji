<p align="center">
    <img src="https://github.com/TyraelDLee/HarukaEmoji/blob/main/images/abaaba.png"/>
</p>

# HarukaEmoji
rua豹使人快乐，rua了又rua！<br>

rua豹器5.7来啦 <br>
兼容绝大多数chromium内核浏览器，例如：Opera浏览器，360浏览器，新MS Edge，yandex....。<br>
现已支持火狐浏览器，见：<a href="https://addons.mozilla.org/zh-CN/firefox/addon/rua%E8%B1%B9%E5%99%A8/">火狐扩展商店</a>

## 已有的功能
- 视频投稿推送通知。
- 直播间开播推送通知。
- 直播牌子自动切换。
- 自动签到。
- 弹幕姬表情选取发送框（目前仅支持八儿力老师的直播间）。
- 默认直播画质。
- 大会员B币兑换。
- 隐身进入直播间。
- 自动打卡有牌子的直播间。
- 右键关联菜单搜索。识别到AV/BV号时会自动跳转到视频页面，其余的会跳转到b站搜索结果。
- 自动打卡有牌子的直播间。
- 主站视频下载，支持单音轨下载<br>
  注：音轨音质保存是会选择视频提供的最佳音频。<br>
- 快速录制直播片段 (beta) <br> 支持录制重放，默认保留开始录制前5分钟片段，可在设置中设置重放时长
- 增加了新版UI主页分区隐藏的功能。

## 安装
### crx文件安装
- 打开浏览器插件页；
- 开启开发者模式；
- 把crx文件拖入页面；
- 关闭开发者模式。

### 应用商店安装
- chrome 网上应用店搜索rua豹器
- 或者用下方链接直达
- 安装即可。

## 怎么用
在b站登录自己的账号后，插件所有功能就会自动运行。

### 自定义设置
单击地址栏右侧插件图标即可打开设置。
目前可以设置的有：
- 开关通知
- 通知模式（大图/普通）
- 开关自动签到
- 开关自动切换粉丝勋章
- 默认直播画质
- 大会员B币兑换

### 移动端
下载支持插件的浏览器（如kiwi）并在浏览器安装即可。（暂不支持iOS）

## 下载：
[chrome插件商店](https://chrome.google.com/webstore/detail/rua%E8%B1%B9%E5%99%A8/igapngheaefbfhikpbngjgakfnedkchb)
<br>
[火狐扩展商店](https://addons.mozilla.org/zh-CN/firefox/addon/rua%E8%B1%B9%E5%99%A8/)

## 版本记录
### ver 5.8
- 添加了表情权限显示。
- 修复了弹幕框字数上限显示不正确的问题。
- 修复了某些情况下主页分区隐藏不生效的问题。
- 一些其他改进。

### ver 5.7
- 增加了对"房间专属表情"的支持。
- 增加了新版UI主页分区隐藏的功能。
- 一些其他改进。

### ver 5.6
- 现在可以缓存HDR视频了。
- 一些其他改进。

### ver 5.5
- 现在缓存音频会自动保存为m4a文件，不需要再手动修改文件名了。
- 添加了杜比全景声音频下载的功能。（由于封装问题杜比全景声音频会保存为mp4格式）

### ver 5.4
- 添加了视频弹幕下载的功能。
- 禁用了macOS下的推送"显示封面"开关，因为macOS不支持此类推送。
- 修复了macOS中文输入法回车键在直播间悬浮输入框中意外触发弹幕发送的问题。
- 一些其他改进。

### ver 5.3
- 提高了录制直播片段的导出效率。
- 添加了通用表情及UP大表情的悬浮窗以及全屏下的支持。(支持所有直播间)
- 修复了一些问题。

### ver 5.2
- 添加了快速录制直播片段。
- 修复了一些问题。

### ver 5.1
- 添加了音频的wav转码功能。
- 添加了弹幕内容查询功能。  
- 修复了一些问题。

### ver 5.0
- 添加了视频页面的视频/音轨下载功能。
- 添加了视频页面的弹幕查询功能。
- 优化了直播间深色模式的支持。
- 更新了勋章查询的API，修复了勋章佩戴失效的问题。
- 修复了一些问题。

### ver 4.14.3
- 将Haruna对高分辨率屏幕做了支持。
- 添加了检测更新版本功能。
- 修复了一些问题。

### ver 4.14
- 添加了隐身进入直播间的功能。
- 添加了右键关联菜单搜索。
- 添加了自动打卡有牌子的直播间。

### ver 4.13
- 修复了一系列问题。
- 移除了直播间无侧边栏网页全屏的选项。(因为我是猪陛...)

### ver 4.12
- 添加了视频更新的推送通知。
- 添加了直播间无侧边栏网页全屏的选项。  
- 修复了关闭浏览器再启动后无法立即签到的问题。
- 更改了天选之人抽奖的逻辑。现在点击参与后天选窗口会自动关闭，开奖时若没有中奖则不再会弹窗。注：此功能不会影响正常参与天选。
- 修复了一些微小的问题。

### ver 4.11
- 添加了默认画质的设置。
- 添加了大会员B币兑换。  
- 修复了一些微小的问题。

### ver 4.10
- 添加了直播间悬窗的初始位置。
- 修复了在某些直播间换牌子失效的问题。
- 修复了某些情况下自动签到失效的问题。
- 添加了对深色模式的支持

### ver 4.9
- 添加了使用说明页面。
- 修复了点击通知时可能会打开多个窗口的问题。
- 改进了通过通知打开直播间时的窗口逻辑。
- 添加了对火狐的支持。
- 修复了初次进入直播间时牌子显示不正确的问题。

### ver 4.8
- 添加了图片模式通知。
- 修复了一些问题。
- 添加了对移动端的支持。（需要移动端浏览器支持插件）

### ver 4.7
- 改进了翻牌子的功能，现在支持多个直播间无缝切换，不再需要刷新了。
- 添加了设置页面。
- 修复了移动悬窗时文本会被选中的问题。

### ver 4.6
- 添加了自动签到功能。
- 改进了直播间信息API调用，开播推送延迟大幅减少。

### ver 4.4
- 修正了弹幕指令的内容。 

### ver 4.3
- 添加了新的表情包。
- 修正了在活动页面不能正常显示的问题。


## 开源组件许可
### FFmpeg.wasm
- Offical site: [ffmpegwasm.netlify.app](https://ffmpegwasm.netlify.app/)
- Copyright (c) FFmpeg.wasm developers and contributors
- License: [github.com/ffmpegwasm/ffmpeg.wasm-core/blob/n4.3.1-wasm/LICENSE.md](https://github.com/ffmpegwasm/ffmpeg.wasm-core/blob/n4.3.1-wasm/LICENSE.md)

### Protocol Buffers
- Offical site: [developers.google.com/protocol-buffers](https://developers.google.com/protocol-buffers/)
- Copyright (c) 2008 Google Inc.
- License: [github.com/protocolbuffers/protobuf/blob/master/LICENSE](https://github.com/protocolbuffers/protobuf/blob/master/LICENSE)

### CRC crack
- CRC.js [github.com/bilibili-helper/bilibili-helper-o/blob/master/src/js/libs/crc32.js](https://github.com/bilibili-helper/bilibili-helper-o/blob/master/src/js/libs/crc32.js)
- Copyright (c) 2020 Zac Yu, ruo
- License: [github.com/bilibili-helper/bilibili-helper-o/blob/master/LICENSE](https://github.com/bilibili-helper/bilibili-helper-o/blob/master/LICENSE)
